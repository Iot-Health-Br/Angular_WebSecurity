<div class="container">
  <div class="card-flex">
    <h1>User Details</h1>

    <!-- Loading Spinner -->
    <div *ngIf="loading" class="card flex justify-content-center">
      <p-progressSpinner ariaLabel="loading" />
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="error-message">
      <p-message severity="error" [text]="error"></p-message>
    </div>

    <div class="card-table" *ngIf="!loading && !error" >
      <p-table class="user-table"
        [value]="products"
        [scrollable]="true"
        scrollHeight="400px"
        [(selection)]="selectedProduct"
        dataKey="code"
        [tableStyle]="{'min-width': '50rem'}">
        <ng-template pTemplate="header">
          <tr>
            <th style="width: 4rem"></th>
            <th>ID</th>
            <th>User Name</th>
            <th>Name</th>
            <th>Category</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product>
          <tr>
            <td>
              <p-tableRadioButton [value]="product" />
            </td>
            <td>{{product.id}}</td>
            <td>{{product.username}}</td>
            <td>{{product.nome}}</td>
            <td>{{product.roles}}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
    <div class="button-group">
      <p-toast />
      <p-button label="Alterar" icon="pi pi-check" styleClass="save-button" (onClick)="changeUser()"></p-button>
      <p-button label="Search" icon="pi pi-search" styleClass="search-button" (onClick)="searchUser()"></p-button>
      <p-button label="Cancel" icon="pi pi-times" styleClass="cancel-button" (onClick)="clearForm()"></p-button>
    </div>
  </div>
</div>
